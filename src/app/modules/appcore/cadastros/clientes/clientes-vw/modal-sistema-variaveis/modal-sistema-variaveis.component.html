<div class="card">
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Variáveis</h5><a type="button" (click)="new()"
            class="btn btn-xs btn-outline-primary mt-3">Novo</a>
    </div>
    <div class="card-body">
        <div class="form-row">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Variavel</th>
                        <th>Setor</th>
                        <th>Descrição</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ################ NOVO REGISTRO - INSERIR ##################### -->
                    <tr [formGroup]="frmForm" *ngIf="frmForm.value.id == 0" class="editing">

                        <td class="form-group col-12 col-sm-4">
                            <select class="form-control" formControlName="idVariavel" [ngClass]="{ 'is-invalid' :
                            submitted && s.idVariavel.errors}" autofocus="true">
                                <option *ngFor="let item of lstVariaveis" [ngValue]="item.id">{{item.nome}}</option>
                            </select>
                            <span class="invalid-feedback" *ngIf="s.idVariavel.errors?.required">Este campo é obrigatório</span>
                        </td>

                        <td class="form-group col-12 col-sm-4">
                            <select class="form-control" formControlName="idSetor" [ngClass]="{ 'is-invalid' :
                            submitted && s.idSetor.errors}">
                                <option *ngFor="let item of lstSetores" [ngValue]="item.id">{{item.nome}}</option>
                            </select>
                            <span class="invalid-feedback" *ngIf="s.idSetor.errors?.required">Este campo é obrigatório</span>
                        </td>

                        <td class="form-group col-12 col-sm-4">
                            <input class="form-control" type="text" formControlName="descricao" [ngClass]="{ 'is-invalid' :
                            submitted && s.descricao.errors}">
                            <span class="invalid-feedback" *ngIf="s.descricao.errors?.required">Este campo é obrigatório</span>
                        </td>

                        <td class="d-flex justify-content-end pt-3">
                            <button type="button" (click)="save($event)" class="btn btn-xs btn-success">Salvar</button>
                            <button type="button" (click)="canceledit()" class="btn btn-xs btn-info">Cancelar</button>
                        </td>
                    </tr>
                    <!-- - ################ LISTAGEM DOS REGISTROS #####################  -->
                    <tr [ngClass]="{ 'editing shadow' : frmForm.value.id == item.id}" [formGroup]="frmForm" *ngFor="let item of itens">
                        <td *ngIf="frmForm.value.id != item.id">{{item.nomeVariavel}}</td>
                        <td *ngIf="frmForm.value.id != item.id">{{item.nomeSetor}}</td>
                        <td *ngIf="frmForm.value.id != item.id">{{item.descricao}}</td>

                        <td *ngIf="frmForm.value.id != item.id" class="d-flex justify-content-end">
                            <button type="button" (click)="edit(item)" class="btn btn-xs btn-outline-info"><i
                                    class="material-icons icon-button">&#xe3c9;</i> Editar</button>
                            <button type="button" (click)="delete(item.id)" class="btn btn-xs btn-danger">
                                <i class="material-icons icon-button">&#xe872;</i> Excluir</button>
                        </td>

                        <!-- - ################ EDITAR DOS REGISTROS #####################  -->
                        <td *ngIf="frmForm.value.id == item.id">
                            <select class="form-control" formControlName="idVariavel" [ngClass]="{ 'is-invalid' :
                         submitted && s.idVariavel.errors}" autofocus="true">
                                <option *ngFor="let item of lstVariaveis" [ngValue]="item.id">{{item.nome}}</option>
                            </select>
                            <span class="invalid-feedback" *ngIf="s.idVariavel.errors?.required">Este campo é obrigatório</span>
                        </td>

                        <td *ngIf="frmForm.value.id == item.id">
                            <select class="form-control" formControlName="idSetor" [ngClass]="{ 'is-invalid' :
                    submitted && s.idSetor.errors}">
                                <option *ngFor="let item of lstSetores" [ngValue]="item.id">{{item.nome}}</option>
                            </select>
                            <span class="invalid-feedback" *ngIf="s.idSetor.errors?.required">Este campo é obrigatório</span>
                        </td>

                        <td *ngIf="frmForm.value.id == item.id">
                            <input class="form-control" type="text" formControlName="descricao" [ngClass]="{ 'is-invalid' :
                    submitted && s.descricao.errors}">
                            <span class="invalid-feedback" *ngIf="s.descricao.errors?.required">Este campo é obrigatório</span>
                        </td>

                        <td *ngIf="frmForm.value.id == item.id" class="d-flex justify-content-end pt-3">
                            <button type="button" (click)="save($event)" class="btn btn-xs btn-success"><i
                                    class="material-icons icon-button">&#xe161;</i>
                                Salvar</button>
                            <button type="button" (click)="canceledit()" class="btn btn-xs btn-info"><i
                                    class="material-icons icon-button">&#xe5c9;</i> Cancelar</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="fechaModalSisVar()">Fechar</button>

    </div>
</div>